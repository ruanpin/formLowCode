import{a as j,u as X,e as Y,c,h as i,f as Z,g as I,r as P,i as x,Q as A,w as z,t as ee,j as M,k as te,l as oe,m as ne,n as ae,o as le,b as re,N as se}from"./index.d0e330ea.js";import{u as L,a as G,Q as ie,b as ce,c as O,d as ue}from"./QCard.b7ae4ec2.js";import{Q as de}from"./QOptionGroup.b1e1b6eb.js";import"./scroll.81351af8.js";import"./use-checkbox.164c1abb.js";import"./QCheckbox.cd0d7d9c.js";import"./QToggle.2b97ccdf.js";let D=null,Q=null;const B={setNoticeVue:e=>{D=e},setDialogVue:e=>{Q=e},prompt:(e,o)=>new Promise((n,l)=>{Q.create({title:e,message:o,prompt:{model:"",type:"text"},ok:{label:"\u78BA\u8A8D",push:!1},cancel:!0,persistent:!0}).onOk(r=>{n(r)}).onCancel(()=>{l()}).onDismiss(()=>{l()})}),ask:(e,o,n)=>new Promise((l,r)=>{Q.create({title:e,message:o,html:!0,ok:{label:"\u78BA\u8A8D",push:!1},cancel:{label:"\u53D6\u6D88",push:!1,color:"white",textColor:"primary",flat:!0},persistent:!0}).onOk(()=>{l()}).onCancel(()=>{r()}).onDismiss(()=>{r()})}),successLogin:(e,o="person")=>{D.create({progress:!0,message:e,icon:o,color:"green",textColor:"white",timeout:900,position:"bottom-right"})},success:(e,o="check_circle")=>{D.create({progress:!0,message:e,icon:o,color:"light-green-7",textColor:"white",timeout:500,position:"center"})},rulewarning:(e,o="warning")=>{D.create({progress:!0,message:e,icon:o,color:"orange",textColor:"black",timeout:3e3,position:"bottom-left"})},warning:(e,o="warning")=>{D.create({progress:!0,message:e,icon:o,color:"red",textColor:"white",timeout:3e3,position:"bottom-left"})}};var me=j({name:"QCardActions",props:{...X,vertical:Boolean},setup(e,{slots:o}){const n=Y(e),l=c(()=>`q-card__actions ${n.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>i("div",{class:l.value},Z(o.default))}});const ge={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},_={xs:2,sm:4,md:8,lg:16,xl:24};var N=j({name:"QSeparator",props:{...L,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const o=I(),n=G(e,o.proxy.$q),l=c(()=>e.vertical===!0?"vertical":"horizontal"),r=c(()=>` q-separator--${l.value}`),d=c(()=>e.inset!==!1?`${r.value}-${ge[e.inset]}`:""),m=c(()=>`q-separator${r.value}${d.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(n.value===!0?" q-separator--dark":"")),v=c(()=>{const u={};if(e.size!==void 0&&(u[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const f=e.spaced===!0?`${_.md}px`:e.spaced in _?`${_[e.spaced]}px`:e.spaced,g=e.vertical===!0?["Left","Right"]:["Top","Bottom"];u[`margin${g[0]}`]=u[`margin${g[1]}`]=f}return u});return()=>i("hr",{class:m.value,style:v.value,"aria-orientation":l.value})}}),ve=j({name:"DialogPluginComponent",props:{...L,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:e=>["ok","cancel","none"].includes(e)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(e,{emit:o}){const{proxy:n}=I(),{$q:l}=n,r=G(e,l),d=P(null),m=P(e.prompt!==void 0?e.prompt.model:e.options!==void 0?e.options.model:void 0),v=c(()=>"q-dialog-plugin"+(r.value===!0?" q-dialog-plugin--dark q-dark":"")+(e.progress!==!1?" q-dialog-plugin--progress":"")),u=c(()=>e.color||(r.value===!0?"amber":"primary")),f=c(()=>e.progress===!1?null:x(e.progress)===!0?{component:e.progress.spinner||A,props:{color:e.progress.color||u.value}}:{component:A,props:{color:u.value}}),g=c(()=>e.prompt!==void 0||e.options!==void 0),p=c(()=>{if(g.value!==!0)return{};const{model:s,isValid:q,items:ke,...W}=e.prompt!==void 0?e.prompt:e.options;return W}),b=c(()=>x(e.ok)===!0||e.ok===!0?l.lang.label.ok:e.ok),y=c(()=>x(e.cancel)===!0||e.cancel===!0?l.lang.label.cancel:e.cancel),h=c(()=>e.prompt!==void 0?e.prompt.isValid!==void 0&&e.prompt.isValid(m.value)!==!0:e.options!==void 0?e.options.isValid!==void 0&&e.options.isValid(m.value)!==!0:!1),w=c(()=>({color:u.value,label:b.value,ripple:!1,disable:h.value,...x(e.ok)===!0?e.ok:{flat:!0},"data-autofocus":e.focus==="ok"&&g.value!==!0||void 0,onClick:a})),V=c(()=>({color:u.value,label:y.value,ripple:!1,...x(e.cancel)===!0?e.cancel:{flat:!0},"data-autofocus":e.focus==="cancel"&&g.value!==!0||void 0,onClick:k}));z(()=>e.prompt&&e.prompt.model,$),z(()=>e.options&&e.options.model,$);function C(){d.value.show()}function t(){d.value.hide()}function a(){o("ok",ee(m.value)),t()}function k(){t()}function S(){o("hide")}function $(s){m.value=s}function K(s){h.value!==!0&&e.prompt.type!=="textarea"&&te(s,13)===!0&&a()}function T(s,q){return e.html===!0?i(O,{class:s,innerHTML:q}):i(O,{class:s},()=>q)}function R(){return[i(ue,{color:u.value,dense:!0,autofocus:!0,dark:r.value,...p.value,modelValue:m.value,"onUpdate:modelValue":$,onKeyup:K})]}function U(){return[i(de,{color:u.value,options:e.options.items,dark:r.value,...p.value,modelValue:m.value,"onUpdate:modelValue":$})]}function F(){const s=[];return e.cancel&&s.push(i(M,V.value)),e.ok&&s.push(i(M,w.value)),i(me,{class:e.stackButtons===!0?"items-end":"",vertical:e.stackButtons,align:"right"},()=>s)}function E(){const s=[];return e.title&&s.push(T("q-dialog__title",e.title)),e.progress!==!1&&s.push(i(O,{class:"q-dialog__progress"},()=>i(f.value.component,f.value.props))),e.message&&s.push(T("q-dialog__message",e.message)),e.prompt!==void 0?s.push(i(O,{class:"scroll q-dialog-plugin__form"},R)):e.options!==void 0&&s.push(i(N,{dark:r.value}),i(O,{class:"scroll q-dialog-plugin__form"},U),i(N,{dark:r.value})),(e.ok||e.cancel)&&s.push(F()),s}function J(){return[i(ce,{class:[v.value,e.cardClass],style:e.cardStyle,dark:r.value},E)]}return Object.assign(n,{show:C,hide:t}),()=>i(ie,{ref:d,onHide:S},J)}});function H(e,o){for(const n in o)n!=="spinner"&&Object(o[n])===o[n]?(e[n]=Object(e[n])!==e[n]?{}:{...e[n]},H(e[n],o[n])):e[n]=o[n]}function fe(e,o,n){return l=>{let r,d;const m=o===!0&&l.component!==void 0;if(m===!0){const{component:t,componentProps:a}=l;r=typeof t=="string"?n.component(t):t,d=a||{}}else{const{class:t,style:a,...k}=l;r=e,d=k,t!==void 0&&(k.cardClass=t),a!==void 0&&(k.cardStyle=a)}let v,u=!1;const f=P(null),g=oe(!1,"dialog"),p=t=>{if(f.value!==null&&f.value[t]!==void 0){f.value[t]();return}const a=v.$.subTree;if(a&&a.component){if(a.component.proxy&&a.component.proxy[t]){a.component.proxy[t]();return}if(a.component.subTree&&a.component.subTree.component&&a.component.subTree.component.proxy&&a.component.subTree.component.proxy[t]){a.component.subTree.component.proxy[t]();return}}console.error("[Quasar] Incorrectly defined Dialog component")},b=[],y=[],h={onOk(t){return b.push(t),h},onCancel(t){return y.push(t),h},onDismiss(t){return b.push(t),y.push(t),h},hide(){return p("hide"),h},update(t){if(v!==null){if(m===!0)Object.assign(d,t);else{const{class:a,style:k,...S}=t;a!==void 0&&(S.cardClass=a),k!==void 0&&(S.cardStyle=k),H(d,S)}v.$forceUpdate()}return h}},w=t=>{u=!0,b.forEach(a=>{a(t)})},V=()=>{C.unmount(g),le(g),C=null,v=null,u!==!0&&y.forEach(t=>{t()})};let C=ne({name:"QGlobalDialog",setup:()=>()=>i(r,{...d,ref:f,onOk:w,onHide:V,onVnodeMounted(...t){typeof d.onVnodeMounted=="function"&&d.onVnodeMounted(...t),ae(()=>p("show"))}})},n);return v=C.mount(g),h}}var he={install({$q:e,parentApp:o}){e.dialog=this.create=fe(ve,!0,o)}},De=re(({app:e})=>{B.setNoticeVue(se),B.setDialogVue(he),e.config.globalProperties.$alert=B,e.provide("alert",e.config.globalProperties.$alert)});export{De as default};
