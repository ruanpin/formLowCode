import{h as re,c as ue,_ as oe}from"./IndexPage.f586d954.js";import{G as se,e as ce,h as de,j as fe,A as me,H as ge,B as H,i as ve,o as W}from"./QCard.5224e60f.js";import{r as w,c,g as M,U as he,B as te,L as ye,h as v,a as ne,A as Se,E as be,p as Ce,q as Fe,T as _e,f as pe,Q as xe,w as je,K as E,a5 as $,aq as K,aa as B,a9 as ze,af as ke,ar as X,as as Y,aB as G,au as J,a8 as L,a6 as we,a7 as Q,j as Z,F as ee,aA as Ie}from"./index.4a5f5042.js";import{u as Oe}from"./elementCSS.ef4cc8d5.js";import"./scroll.bb3bf9b7.js";import"./index.e5848576.js";function A(e,u,h,p){const o=[];return e.forEach(s=>{p(s)===!0?o.push(s):u.push({failedPropValidation:h,file:s})}),o}function P(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),te(e)}const qe={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Ne=["rejected"];function Te({editable:e,dnd:u,getFileInput:h,addFilesToQueue:p}){const{props:o,emit:s,proxy:C}=M(),F=w(null),x=c(()=>o.accept!==void 0?o.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),f=c(()=>parseInt(o.maxFiles,10)),m=c(()=>parseInt(o.maxTotalSize,10));function T(t){if(e.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&he(t);else{const S=h();S&&S!==t.target&&S.click(t)}}function y(t){e.value&&t&&p(null,t)}function _(t,S,N,I){let a=Array.from(S||t.target.files);const g=[],j=()=>{g.length!==0&&s("rejected",g)};if(o.accept!==void 0&&x.value.indexOf("*/")===-1&&(a=A(a,g,"accept",l=>x.value.some(d=>l.type.toUpperCase().startsWith(d)||l.name.toUpperCase().endsWith(d))),a.length===0))return j();if(o.maxFileSize!==void 0){const l=parseInt(o.maxFileSize,10);if(a=A(a,g,"max-file-size",d=>d.size<=l),a.length===0)return j()}if(o.multiple!==!0&&a.length!==0&&(a=[a[0]]),a.forEach(l=>{l.__key=l.webkitRelativePath+l.lastModified+l.name+l.size}),I===!0){const l=N.map(d=>d.__key);a=A(a,g,"duplicate",d=>l.includes(d.__key)===!1)}if(a.length===0)return j();if(o.maxTotalSize!==void 0){let l=I===!0?N.reduce((d,R)=>d+R.size,0):0;if(a=A(a,g,"max-total-size",d=>(l+=d.size,l<=m.value)),a.length===0)return j()}if(typeof o.filter=="function"){const l=o.filter(a);a=A(a,g,"filter",d=>l.includes(d))}if(o.maxFiles!==void 0){let l=I===!0?N.length:0;if(a=A(a,g,"max-files",()=>(l++,l<=f.value)),a.length===0)return j()}if(j(),a.length!==0)return a}function q(t){P(t),u.value!==!0&&(u.value=!0)}function r(t){te(t),(t.relatedTarget!==null||ye.is.safari!==!0?t.relatedTarget!==F.value:document.elementsFromPoint(t.clientX,t.clientY).includes(F.value)===!1)===!0&&(u.value=!1)}function V(t){P(t);const S=t.dataTransfer.files;S.length!==0&&p(null,S),u.value=!1}function D(t){if(u.value===!0)return v("div",{ref:F,class:`q-${t}__dnd absolute-full`,onDragenter:P,onDragover:P,onDragleave:r,onDrop:V})}return Object.assign(C,{pickFiles:T,addFiles:y}),{pickFiles:T,addFiles:y,onDragover:q,onDragleave:r,processFiles:_,getDndNode:D,maxFilesNumber:f,maxTotalSizeNumber:m}}var Ve=ne({name:"QFile",inheritAttrs:!1,props:{...se,...ce,...qe,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...de,...Ne],setup(e,{slots:u,emit:h,attrs:p}){const{proxy:o}=M(),s=fe(),C=w(null),F=w(!1),x=me(e),{pickFiles:f,onDragover:m,onDragleave:T,processFiles:y,getDndNode:_}=Te({editable:s.editable,dnd:F,getFileInput:n,addFilesToQueue:z}),q=ge(e),r=c(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),V=c(()=>H(r.value)),D=c(()=>r.value.map(i=>i.name).join(", ")),t=c(()=>re(r.value.reduce((i,b)=>i+b.size,0))),S=c(()=>({totalSize:t.value,filesNumber:r.value.length,maxFiles:e.maxFiles})),N=c(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:x.value,...p,id:s.targetUid.value,disabled:s.editable.value!==!0})),I=c(()=>"q-file q-field--auto-height"+(F.value===!0?" q-file--dnd":"")),a=c(()=>e.multiple===!0&&e.append===!0);function g(i){const b=r.value.slice();b.splice(i,1),l(b)}function j(i){const b=r.value.indexOf(i);b!==-1&&g(b)}function l(i){h("update:modelValue",e.multiple===!0?i:i[0])}function d(i){i.keyCode===13&&be(i)}function R(i){(i.keyCode===13||i.keyCode===32)&&f(i)}function n(){return C.value}function z(i,b){const k=y(i,b,r.value,a.value),U=n();U!=null&&(U.value=""),k!==void 0&&((e.multiple===!0?e.modelValue&&k.every(le=>r.value.includes(le)):e.modelValue===k[0])||l(a.value===!0?r.value.concat(k):k))}function O(){return[v("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function ie(){if(u.file!==void 0)return r.value.length===0?O():r.value.map((b,k)=>u.file({index:k,file:b,ref:this}));if(u.selected!==void 0)return r.value.length===0?O():u.selected({files:r.value,ref:this});if(e.useChips===!0)return r.value.length===0?O():r.value.map((b,k)=>v(ue,{key:"file-"+k,removable:s.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{g(k)}},()=>v("span",{class:"ellipsis",textContent:b.name})));const i=e.displayValue!==void 0?e.displayValue:D.value;return i.length!==0?[v("div",{class:e.inputClass,style:e.inputStyle,textContent:i})]:O()}function ae(){const i={ref:C,...N.value,...q.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:z};return e.multiple===!0&&(i.multiple=!0),v("input",i)}return Object.assign(s,{fieldClass:I,emitValue:l,hasValue:V,inputRef:C,innerValue:r,floatingLabel:c(()=>V.value===!0||H(e.displayValue)),computedCounter:c(()=>{if(e.counterLabel!==void 0)return e.counterLabel(S.value);const i=e.maxFiles;return`${r.value.length}${i!==void 0?" / "+i:""} (${t.value})`}),getControlChild:()=>_("file"),getControl:()=>{const i={ref:s.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return s.editable.value===!0&&Object.assign(i,{onDragover:m,onDragleave:T,onKeydown:d,onKeyup:R}),v("div",i,[ae()].concat(ie()))}}),Object.assign(o,{removeAtIndex:g,removeFile:j,getNativeElement:()=>C.value}),Se(o,"nativeEl",()=>C.value),ve(s)}});const Le={ratio:[String,Number]};function Ae(e,u){return c(()=>{const h=Number(e.ratio||(u!==void 0?u.value:void 0));return isNaN(h)!==!0&&h>0?{paddingBottom:`${100/h}%`}:null})}const De=1.7778;var Re=ne({name:"QImg",props:{...Le,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:De},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:u,emit:h}){const p=w(e.initialRatio),o=Ae(e,p),s=M(),{registerTimeout:C,removeTimeout:F}=W(),{registerTimeout:x,removeTimeout:f}=W(),m=c(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),T=c(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),y=[w(null),w(m.value)],_=w(0),q=w(!1),r=w(!1),V=c(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),D=c(()=>({width:e.width,height:e.height})),t=c(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),S=c(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function N(){if(f(),e.loadingShowDelay===0){q.value=!0;return}x(()=>{q.value=!0},e.loadingShowDelay)}function I(){f(),q.value=!1}function a({target:n}){E(s)===!1&&(F(),p.value=n.naturalHeight===0?.5:n.naturalWidth/n.naturalHeight,g(n,1))}function g(n,z){z===1e3||E(s)===!0||(n.complete===!0?j(n):C(()=>{g(n,z+1)},50))}function j(n){E(s)!==!0&&(_.value=_.value^1,y[_.value].value=null,I(),n.getAttribute("__qerror")!=="true"&&(r.value=!1),h("load",n.currentSrc||n.src))}function l(n){F(),I(),r.value=!0,y[_.value].value=T.value,y[_.value^1].value=m.value,h("error",n)}function d(n){const z=y[n].value,O={key:"img_"+n,class:t.value,style:S.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...z};return _.value===n?Object.assign(O,{class:O.class+"current",onLoad:a,onError:l}):O.class+="loaded",v("div",{class:"q-img__container absolute-full",key:"img"+n},v("img",O))}function R(){return q.value===!1?v("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},pe(u[r.value===!0?"error":"default"])):v("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},u.loading!==void 0?u.loading():e.noSpinner===!0?void 0:[v(xe,{color:e.spinnerColor,size:e.spinnerSize})])}{let n=function(){je(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,z=>{F(),r.value=!1,z===null?(I(),y[_.value^1].value=m.value):N(),y[_.value].value=z},{immediate:!0})};Ce.value===!0?Fe(n):n()}return()=>{const n=[];return o.value!==null&&n.push(v("div",{key:"filler",style:o.value})),y[0].value!==null&&n.push(d(0)),y[1].value!==null&&n.push(d(1)),n.push(v(_e,{name:"q-transition--fade"},R)),v("div",{key:"main",class:V.value,style:D.value,role:"img","aria-label":e.alt},n)}}});const Be={style:{color:"#CC0100"}},Pe={class:"q-ma-xs operatorContainer"},Ue={key:1,class:"row"},Ee={class:"avatarContainer"},$e=Object.assign({name:"UploadImgComponent"},{__name:"index",props:{renderObject:{type:Object,required:!0}},setup(e){const u=e,{rootClass:h,titleClass:p}=Oe({renderObject:u.renderObject}),o=w(null);function s(x){x&&(u.renderObject.previewImgURL=URL.createObjectURL(x))}function C(){o.value.pickFiles()}function F(){u.renderObject.value=null,u.renderObject.previewImgURL=""}return(x,f)=>($(),K("div",{class:G(["q-py-sm",J(h)])},[B("div",{class:G(["f700 q-mb-xs fz14 wordBreakAll",J(p)])},[ze(ke(e.renderObject.label),1),X(B("span",Be," *",512),[[Y,e.renderObject.required]])],2),B("div",null,[X(L(Ve,{ref_key:"imgContainer",ref:o,modelValue:e.renderObject.value,"onUpdate:modelValue":[f[0]||(f[0]=m=>e.renderObject.value=m),f[1]||(f[1]=m=>{s(m)})],label:"Standard",class:"imgContainer",accept:".jpg, .png, .jepg, image/*"},null,8,["modelValue"]),[[Y,!1]]),e.renderObject.previewImgURL?($(),we(Re,{key:0,src:e.renderObject.previewImgURL,class:"previewImgContainer"},{default:Q(()=>[B("div",Pe,[L(Z,{dense:"",flat:"",onClick:f[2]||(f[2]=m=>C())},{default:Q(()=>[L(ee,{name:"change_circle",size:"xs",color:"grey-3"})]),_:1}),L(Z,{dense:"",flat:"",onClick:f[3]||(f[3]=m=>F())},{default:Q(()=>[L(ee,{name:"delete",size:"xs",color:"grey-3"})]),_:1})])]),_:1},8,["src"])):($(),K("div",Ue,[B("div",Ee,[L(Ie,{rounded:"",color:"transparent","text-color":"white",icon:"add",size:"120px",class:"cursor-pointer",onClick:f[4]||(f[4]=m=>C())})])]))])],2))}});var Ye=oe($e,[["__scopeId","data-v-0ab2b138"]]);export{Ye as default};
