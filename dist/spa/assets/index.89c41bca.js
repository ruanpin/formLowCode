import{h as ae,c as le,_ as re}from"./IndexPage.c92de1bb.js";import{G as ue,e as oe,j as se,l as ce,C as de,H as fe,D as H,k as me,r as W}from"./QInput.82f730b3.js";import{r as z,c as d,g as M,U as ge,D as Z,B as ve,h as v,a as ee,A as he,P as ye,I as Se,x as be,F as Ce,f as Fe,Q as _e,w as xe,v as $,a6 as E,at as pe,ab as P,aa as je,ai as ze,ah as K,au as X,a9 as A,a7 as Y,a8 as Q,j as G,R as J,aA as ke}from"./index.c364fea8.js";import"./scroll.8d98b857.js";import"./index.e38b090f.js";function D(e,o,m,_){const u=[];return e.forEach(c=>{_(c)===!0?u.push(c):o.push({failedPropValidation:m,file:c})}),u}function U(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Z(e)}const Ie={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},we=["rejected"];function Ne({editable:e,dnd:o,getFileInput:m,addFilesToQueue:_}){const{props:u,emit:c,proxy:h}=M(),s=z(null),y=d(()=>u.accept!==void 0?u.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),O=d(()=>parseInt(u.maxFiles,10)),w=d(()=>parseInt(u.maxTotalSize,10));function V(t){if(e.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&ge(t);else{const b=m();b&&b!==t.target&&b.click(t)}}function S(t){e.value&&t&&_(null,t)}function F(t,b,q,k){let a=Array.from(b||t.target.files);const g=[],x=()=>{g.length!==0&&c("rejected",g)};if(u.accept!==void 0&&y.value.indexOf("*/")===-1&&(a=D(a,g,"accept",l=>y.value.some(f=>l.type.toUpperCase().startsWith(f)||l.name.toUpperCase().endsWith(f))),a.length===0))return x();if(u.maxFileSize!==void 0){const l=parseInt(u.maxFileSize,10);if(a=D(a,g,"max-file-size",f=>f.size<=l),a.length===0)return x()}if(u.multiple!==!0&&a.length!==0&&(a=[a[0]]),a.forEach(l=>{l.__key=l.webkitRelativePath+l.lastModified+l.name+l.size}),k===!0){const l=q.map(f=>f.__key);a=D(a,g,"duplicate",f=>l.includes(f.__key)===!1)}if(a.length===0)return x();if(u.maxTotalSize!==void 0){let l=k===!0?q.reduce((f,L)=>f+L.size,0):0;if(a=D(a,g,"max-total-size",f=>(l+=f.size,l<=w.value)),a.length===0)return x()}if(typeof u.filter=="function"){const l=u.filter(a);a=D(a,g,"filter",f=>l.includes(f))}if(u.maxFiles!==void 0){let l=k===!0?q.length:0;if(a=D(a,g,"max-files",()=>(l++,l<=O.value)),a.length===0)return x()}if(x(),a.length!==0)return a}function N(t){U(t),o.value!==!0&&(o.value=!0)}function r(t){Z(t),(t.relatedTarget!==null||ve.is.safari!==!0?t.relatedTarget!==s.value:document.elementsFromPoint(t.clientX,t.clientY).includes(s.value)===!1)===!0&&(o.value=!1)}function T(t){U(t);const b=t.dataTransfer.files;b.length!==0&&_(null,b),o.value=!1}function R(t){if(o.value===!0)return v("div",{ref:s,class:`q-${t}__dnd absolute-full`,onDragenter:U,onDragover:U,onDragleave:r,onDrop:T})}return Object.assign(h,{pickFiles:V,addFiles:S}),{pickFiles:V,addFiles:S,onDragover:N,onDragleave:r,processFiles:F,getDndNode:R,maxFilesNumber:O,maxTotalSizeNumber:w}}var Oe=ee({name:"QFile",inheritAttrs:!1,props:{...ue,...oe,...Ie,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...se,...we],setup(e,{slots:o,emit:m,attrs:_}){const{proxy:u}=M(),c=ce(),h=z(null),s=z(!1),y=de(e),{pickFiles:O,onDragover:w,onDragleave:V,processFiles:S,getDndNode:F}=Ne({editable:c.editable,dnd:s,getFileInput:i,addFilesToQueue:p}),N=fe(e),r=d(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),T=d(()=>H(r.value)),R=d(()=>r.value.map(n=>n.name).join(", ")),t=d(()=>ae(r.value.reduce((n,C)=>n+C.size,0))),b=d(()=>({totalSize:t.value,filesNumber:r.value.length,maxFiles:e.maxFiles})),q=d(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:y.value,..._,id:c.targetUid.value,disabled:c.editable.value!==!0})),k=d(()=>"q-file q-field--auto-height"+(s.value===!0?" q-file--dnd":"")),a=d(()=>e.multiple===!0&&e.append===!0);function g(n){const C=r.value.slice();C.splice(n,1),l(C)}function x(n){const C=r.value.indexOf(n);C!==-1&&g(C)}function l(n){m("update:modelValue",e.multiple===!0?n:n[0])}function f(n){n.keyCode===13&&ye(n)}function L(n){(n.keyCode===13||n.keyCode===32)&&O(n)}function i(){return h.value}function p(n,C){const j=S(n,C,r.value,a.value),B=i();B!=null&&(B.value=""),j!==void 0&&((e.multiple===!0?e.modelValue&&j.every(ne=>r.value.includes(ne)):e.modelValue===j[0])||l(a.value===!0?r.value.concat(j):j))}function I(){return[v("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function te(){if(o.file!==void 0)return r.value.length===0?I():r.value.map((C,j)=>o.file({index:j,file:C,ref:this}));if(o.selected!==void 0)return r.value.length===0?I():o.selected({files:r.value,ref:this});if(e.useChips===!0)return r.value.length===0?I():r.value.map((C,j)=>v(le,{key:"file-"+j,removable:c.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{g(j)}},()=>v("span",{class:"ellipsis",textContent:C.name})));const n=e.displayValue!==void 0?e.displayValue:R.value;return n.length!==0?[v("div",{class:e.inputClass,style:e.inputStyle,textContent:n})]:I()}function ie(){const n={ref:h,...q.value,...N.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:p};return e.multiple===!0&&(n.multiple=!0),v("input",n)}return Object.assign(c,{fieldClass:k,emitValue:l,hasValue:T,inputRef:h,innerValue:r,floatingLabel:d(()=>T.value===!0||H(e.displayValue)),computedCounter:d(()=>{if(e.counterLabel!==void 0)return e.counterLabel(b.value);const n=e.maxFiles;return`${r.value.length}${n!==void 0?" / "+n:""} (${t.value})`}),getControlChild:()=>F("file"),getControl:()=>{const n={ref:c.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return c.editable.value===!0&&Object.assign(n,{onDragover:w,onDragleave:V,onKeydown:f,onKeyup:L}),v("div",n,[ie()].concat(te()))}}),Object.assign(u,{removeAtIndex:g,removeFile:x,getNativeElement:()=>h.value}),he(u,"nativeEl",()=>h.value),me(c)}});const qe={ratio:[String,Number]};function Ve(e,o){return d(()=>{const m=Number(e.ratio||(o!==void 0?o.value:void 0));return isNaN(m)!==!0&&m>0?{paddingBottom:`${100/m}%`}:null})}const Te=1.7778;var De=ee({name:"QImg",props:{...qe,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Te},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:o,emit:m}){const _=z(e.initialRatio),u=Ve(e,_),c=M(),{registerTimeout:h,removeTimeout:s}=W(),{registerTimeout:y,removeTimeout:O}=W(),w=d(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),V=d(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),S=[z(null),z(w.value)],F=z(0),N=z(!1),r=z(!1),T=d(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),R=d(()=>({width:e.width,height:e.height})),t=d(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),b=d(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function q(){if(O(),e.loadingShowDelay===0){N.value=!0;return}y(()=>{N.value=!0},e.loadingShowDelay)}function k(){O(),N.value=!1}function a({target:i}){$(c)===!1&&(s(),_.value=i.naturalHeight===0?.5:i.naturalWidth/i.naturalHeight,g(i,1))}function g(i,p){p===1e3||$(c)===!0||(i.complete===!0?x(i):h(()=>{g(i,p+1)},50))}function x(i){$(c)!==!0&&(F.value=F.value^1,S[F.value].value=null,k(),i.getAttribute("__qerror")!=="true"&&(r.value=!1),m("load",i.currentSrc||i.src))}function l(i){s(),k(),r.value=!0,S[F.value].value=V.value,S[F.value^1].value=w.value,m("error",i)}function f(i){const p=S[i].value,I={key:"img_"+i,class:t.value,style:b.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...p};return F.value===i?Object.assign(I,{class:I.class+"current",onLoad:a,onError:l}):I.class+="loaded",v("div",{class:"q-img__container absolute-full",key:"img"+i},v("img",I))}function L(){return N.value===!1?v("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Fe(o[r.value===!0?"error":"default"])):v("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},o.loading!==void 0?o.loading():e.noSpinner===!0?void 0:[v(_e,{color:e.spinnerColor,size:e.spinnerSize})])}{let i=function(){xe(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,p=>{s(),r.value=!1,p===null?(k(),S[F.value^1].value=w.value):q(),S[F.value].value=p},{immediate:!0})};Se.value===!0?be(i):i()}return()=>{const i=[];return u.value!==null&&i.push(v("div",{key:"filler",style:u.value})),S[0].value!==null&&i.push(f(0)),S[1].value!==null&&i.push(f(1)),i.push(v(Ce,{name:"q-transition--fade"},L)),v("div",{key:"main",class:T.value,style:R.value,role:"img","aria-label":e.alt},i)}}});const Re={class:"q-py-sm"},Le={class:"f700 q-mb-xs fz14"},Ae={style:{color:"#CC0100"}},Pe={class:"q-ma-xs operatorContainer"},Ue=Object.assign({name:"UploadImgComponent"},{__name:"index",props:{renderObject:{type:Object,required:!0}},setup(e){const o=e,m=z(null);function _(h){h&&(o.renderObject.previewImgURL=URL.createObjectURL(h))}function u(){m.value.pickFiles()}function c(){o.renderObject.value=null,o.renderObject.previewImgURL=""}return(h,s)=>(E(),pe("div",Re,[P("div",Le,[je(ze(e.renderObject.label),1),K(P("span",Ae," *",512),[[X,e.renderObject.required]])]),P("div",null,[K(A(Oe,{ref_key:"imgContainer",ref:m,modelValue:e.renderObject.value,"onUpdate:modelValue":[s[0]||(s[0]=y=>e.renderObject.value=y),s[1]||(s[1]=y=>{_(y)})],label:"Standard",class:"imgContainer",accept:".jpg, .png, .jepg, image/*"},null,8,["modelValue"]),[[X,!1]]),e.renderObject.previewImgURL?(E(),Y(De,{key:0,src:e.renderObject.previewImgURL,class:"previewImgContainer"},{default:Q(()=>[P("div",Pe,[A(G,{dense:"",flat:"",onClick:s[2]||(s[2]=y=>u())},{default:Q(()=>[A(J,{name:"change_circle",size:"xs",color:"grey-3"})]),_:1}),A(G,{dense:"",flat:"",onClick:s[3]||(s[3]=y=>c())},{default:Q(()=>[A(J,{name:"delete",size:"xs",color:"grey-3"})]),_:1})])]),_:1},8,["src"])):(E(),Y(ke,{key:1,rounded:"",color:"grey-5","text-color":"white",icon:"add",size:"120px",class:"cursor-pointer",onClick:s[4]||(s[4]=y=>u())}))])]))}});var He=re(Ue,[["__scopeId","data-v-11359e2a"]]);export{He as default};
