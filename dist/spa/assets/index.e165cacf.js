import{h as ae,c as le,_ as re}from"./IndexPage.9cd584c3.js";import{G as ue,e as oe,h as se,j as ce,A as de,H as fe,B as H,i as me,o as W}from"./QCard.e525a9df.js";import{r as z,c as d,g as M,U as ge,B as Z,L as ve,h as v,a as ee,A as he,E as ye,p as Se,q as be,T as _e,f as Ce,Q as Fe,w as xe,K as E,a5 as $,aq as K,aa as B,a9 as pe,af as je,ar as X,as as Y,a8 as D,a6 as ze,a7 as Q,j as G,F as J,aA as ke}from"./index.6befa4a1.js";import"./scroll.eda1f0ff.js";import"./index.83d5496d.js";function L(e,o,m,F){const u=[];return e.forEach(c=>{F(c)===!0?u.push(c):o.push({failedPropValidation:m,file:c})}),u}function P(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Z(e)}const we={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Ie=["rejected"];function qe({editable:e,dnd:o,getFileInput:m,addFilesToQueue:F}){const{props:u,emit:c,proxy:h}=M(),s=z(null),y=d(()=>u.accept!==void 0?u.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),N=d(()=>parseInt(u.maxFiles,10)),I=d(()=>parseInt(u.maxTotalSize,10));function T(t){if(e.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&ge(t);else{const b=m();b&&b!==t.target&&b.click(t)}}function S(t){e.value&&t&&F(null,t)}function C(t,b,O,k){let a=Array.from(b||t.target.files);const g=[],x=()=>{g.length!==0&&c("rejected",g)};if(u.accept!==void 0&&y.value.indexOf("*/")===-1&&(a=L(a,g,"accept",l=>y.value.some(f=>l.type.toUpperCase().startsWith(f)||l.name.toUpperCase().endsWith(f))),a.length===0))return x();if(u.maxFileSize!==void 0){const l=parseInt(u.maxFileSize,10);if(a=L(a,g,"max-file-size",f=>f.size<=l),a.length===0)return x()}if(u.multiple!==!0&&a.length!==0&&(a=[a[0]]),a.forEach(l=>{l.__key=l.webkitRelativePath+l.lastModified+l.name+l.size}),k===!0){const l=O.map(f=>f.__key);a=L(a,g,"duplicate",f=>l.includes(f.__key)===!1)}if(a.length===0)return x();if(u.maxTotalSize!==void 0){let l=k===!0?O.reduce((f,A)=>f+A.size,0):0;if(a=L(a,g,"max-total-size",f=>(l+=f.size,l<=I.value)),a.length===0)return x()}if(typeof u.filter=="function"){const l=u.filter(a);a=L(a,g,"filter",f=>l.includes(f))}if(u.maxFiles!==void 0){let l=k===!0?O.length:0;if(a=L(a,g,"max-files",()=>(l++,l<=N.value)),a.length===0)return x()}if(x(),a.length!==0)return a}function q(t){P(t),o.value!==!0&&(o.value=!0)}function r(t){Z(t),(t.relatedTarget!==null||ve.is.safari!==!0?t.relatedTarget!==s.value:document.elementsFromPoint(t.clientX,t.clientY).includes(s.value)===!1)===!0&&(o.value=!1)}function V(t){P(t);const b=t.dataTransfer.files;b.length!==0&&F(null,b),o.value=!1}function R(t){if(o.value===!0)return v("div",{ref:s,class:`q-${t}__dnd absolute-full`,onDragenter:P,onDragover:P,onDragleave:r,onDrop:V})}return Object.assign(h,{pickFiles:T,addFiles:S}),{pickFiles:T,addFiles:S,onDragover:q,onDragleave:r,processFiles:C,getDndNode:R,maxFilesNumber:N,maxTotalSizeNumber:I}}var Ne=ee({name:"QFile",inheritAttrs:!1,props:{...ue,...oe,...we,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...se,...Ie],setup(e,{slots:o,emit:m,attrs:F}){const{proxy:u}=M(),c=ce(),h=z(null),s=z(!1),y=de(e),{pickFiles:N,onDragover:I,onDragleave:T,processFiles:S,getDndNode:C}=qe({editable:c.editable,dnd:s,getFileInput:i,addFilesToQueue:p}),q=fe(e),r=d(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),V=d(()=>H(r.value)),R=d(()=>r.value.map(n=>n.name).join(", ")),t=d(()=>ae(r.value.reduce((n,_)=>n+_.size,0))),b=d(()=>({totalSize:t.value,filesNumber:r.value.length,maxFiles:e.maxFiles})),O=d(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:y.value,...F,id:c.targetUid.value,disabled:c.editable.value!==!0})),k=d(()=>"q-file q-field--auto-height"+(s.value===!0?" q-file--dnd":"")),a=d(()=>e.multiple===!0&&e.append===!0);function g(n){const _=r.value.slice();_.splice(n,1),l(_)}function x(n){const _=r.value.indexOf(n);_!==-1&&g(_)}function l(n){m("update:modelValue",e.multiple===!0?n:n[0])}function f(n){n.keyCode===13&&ye(n)}function A(n){(n.keyCode===13||n.keyCode===32)&&N(n)}function i(){return h.value}function p(n,_){const j=S(n,_,r.value,a.value),U=i();U!=null&&(U.value=""),j!==void 0&&((e.multiple===!0?e.modelValue&&j.every(ne=>r.value.includes(ne)):e.modelValue===j[0])||l(a.value===!0?r.value.concat(j):j))}function w(){return[v("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function te(){if(o.file!==void 0)return r.value.length===0?w():r.value.map((_,j)=>o.file({index:j,file:_,ref:this}));if(o.selected!==void 0)return r.value.length===0?w():o.selected({files:r.value,ref:this});if(e.useChips===!0)return r.value.length===0?w():r.value.map((_,j)=>v(le,{key:"file-"+j,removable:c.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{g(j)}},()=>v("span",{class:"ellipsis",textContent:_.name})));const n=e.displayValue!==void 0?e.displayValue:R.value;return n.length!==0?[v("div",{class:e.inputClass,style:e.inputStyle,textContent:n})]:w()}function ie(){const n={ref:h,...O.value,...q.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:p};return e.multiple===!0&&(n.multiple=!0),v("input",n)}return Object.assign(c,{fieldClass:k,emitValue:l,hasValue:V,inputRef:h,innerValue:r,floatingLabel:d(()=>V.value===!0||H(e.displayValue)),computedCounter:d(()=>{if(e.counterLabel!==void 0)return e.counterLabel(b.value);const n=e.maxFiles;return`${r.value.length}${n!==void 0?" / "+n:""} (${t.value})`}),getControlChild:()=>C("file"),getControl:()=>{const n={ref:c.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return c.editable.value===!0&&Object.assign(n,{onDragover:I,onDragleave:T,onKeydown:f,onKeyup:A}),v("div",n,[ie()].concat(te()))}}),Object.assign(u,{removeAtIndex:g,removeFile:x,getNativeElement:()=>h.value}),he(u,"nativeEl",()=>h.value),me(c)}});const Oe={ratio:[String,Number]};function Te(e,o){return d(()=>{const m=Number(e.ratio||(o!==void 0?o.value:void 0));return isNaN(m)!==!0&&m>0?{paddingBottom:`${100/m}%`}:null})}const Ve=1.7778;var De=ee({name:"QImg",props:{...Oe,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Ve},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:o,emit:m}){const F=z(e.initialRatio),u=Te(e,F),c=M(),{registerTimeout:h,removeTimeout:s}=W(),{registerTimeout:y,removeTimeout:N}=W(),I=d(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),T=d(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),S=[z(null),z(I.value)],C=z(0),q=z(!1),r=z(!1),V=d(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),R=d(()=>({width:e.width,height:e.height})),t=d(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),b=d(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function O(){if(N(),e.loadingShowDelay===0){q.value=!0;return}y(()=>{q.value=!0},e.loadingShowDelay)}function k(){N(),q.value=!1}function a({target:i}){E(c)===!1&&(s(),F.value=i.naturalHeight===0?.5:i.naturalWidth/i.naturalHeight,g(i,1))}function g(i,p){p===1e3||E(c)===!0||(i.complete===!0?x(i):h(()=>{g(i,p+1)},50))}function x(i){E(c)!==!0&&(C.value=C.value^1,S[C.value].value=null,k(),i.getAttribute("__qerror")!=="true"&&(r.value=!1),m("load",i.currentSrc||i.src))}function l(i){s(),k(),r.value=!0,S[C.value].value=T.value,S[C.value^1].value=I.value,m("error",i)}function f(i){const p=S[i].value,w={key:"img_"+i,class:t.value,style:b.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...p};return C.value===i?Object.assign(w,{class:w.class+"current",onLoad:a,onError:l}):w.class+="loaded",v("div",{class:"q-img__container absolute-full",key:"img"+i},v("img",w))}function A(){return q.value===!1?v("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Ce(o[r.value===!0?"error":"default"])):v("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},o.loading!==void 0?o.loading():e.noSpinner===!0?void 0:[v(Fe,{color:e.spinnerColor,size:e.spinnerSize})])}{let i=function(){xe(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,p=>{s(),r.value=!1,p===null?(k(),S[C.value^1].value=I.value):O(),S[C.value].value=p},{immediate:!0})};Se.value===!0?be(i):i()}return()=>{const i=[];return u.value!==null&&i.push(v("div",{key:"filler",style:u.value})),S[0].value!==null&&i.push(f(0)),S[1].value!==null&&i.push(f(1)),i.push(v(_e,{name:"q-transition--fade"},A)),v("div",{key:"main",class:V.value,style:R.value,role:"img","aria-label":e.alt},i)}}});const Le={class:"q-py-sm"},Re={class:"f700 q-mb-xs fz14"},Ae={style:{color:"#CC0100"}},Be={class:"q-ma-xs operatorContainer"},Pe={key:1,class:"row"},Ue={class:"avatarContainer"},Ee=Object.assign({name:"UploadImgComponent"},{__name:"index",props:{renderObject:{type:Object,required:!0}},setup(e){const o=e,m=z(null);function F(h){h&&(o.renderObject.previewImgURL=URL.createObjectURL(h))}function u(){m.value.pickFiles()}function c(){o.renderObject.value=null,o.renderObject.previewImgURL=""}return(h,s)=>($(),K("div",Le,[B("div",Re,[pe(je(e.renderObject.label),1),X(B("span",Ae," *",512),[[Y,e.renderObject.required]])]),B("div",null,[X(D(Ne,{ref_key:"imgContainer",ref:m,modelValue:e.renderObject.value,"onUpdate:modelValue":[s[0]||(s[0]=y=>e.renderObject.value=y),s[1]||(s[1]=y=>{F(y)})],label:"Standard",class:"imgContainer",accept:".jpg, .png, .jepg, image/*"},null,8,["modelValue"]),[[Y,!1]]),e.renderObject.previewImgURL?($(),ze(De,{key:0,src:e.renderObject.previewImgURL,class:"previewImgContainer"},{default:Q(()=>[B("div",Be,[D(G,{dense:"",flat:"",onClick:s[2]||(s[2]=y=>u())},{default:Q(()=>[D(J,{name:"change_circle",size:"xs",color:"grey-3"})]),_:1}),D(G,{dense:"",flat:"",onClick:s[3]||(s[3]=y=>c())},{default:Q(()=>[D(J,{name:"delete",size:"xs",color:"grey-3"})]),_:1})])]),_:1},8,["src"])):($(),K("div",Pe,[B("div",Ue,[D(ke,{rounded:"",color:"transparent","text-color":"white",icon:"add",size:"120px",class:"cursor-pointer",onClick:s[4]||(s[4]=y=>u())})])]))])]))}});var Ke=re(Ee,[["__scopeId","data-v-7d49dcf2"]]);export{Ke as default};
