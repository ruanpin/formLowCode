import{a as I,c,h as s,g as L,r as j,i as x,Q as T,w as M,t as X,e as N,f as Y,j as Z,k as ee,n as te,l as oe,b as ne,N as ae}from"./index.adc5c5e8.js";import{Q as le,a as re,b as O,c as ie}from"./use-key-composition.00bd84b0.js";import{u as A,a as G}from"./use-timeout.085da037.js";import{Q as se}from"./QInput.1203a3fa.js";import{Q as ce}from"./QOptionGroup.d6e1d64f.js";import"./use-file-dom-props.7f6b9ef8.js";import"./use-checkbox.53414926.js";import"./QCheckbox.37ad52e5.js";import"./QToggle.e2861c09.js";let D=null,q=null;const B={setNoticeVue:e=>{D=e},setDialogVue:e=>{q=e},prompt:(e,o)=>new Promise((a,i)=>{q.create({title:e,message:o,prompt:{model:"",type:"text"},ok:{label:"\u78BA\u8A8D",push:!1},cancel:!0,persistent:!0}).onOk(l=>{a(l)}).onCancel(()=>{i()}).onDismiss(()=>{i()})}),ask:(e,o,a)=>new Promise((i,l)=>{q.create({title:e,message:o,html:!0,ok:{label:"\u78BA\u8A8D",push:!1},cancel:{label:"\u53D6\u6D88",push:!1,color:"white",textColor:"primary",flat:!0},persistent:!0}).onOk(()=>{i()}).onCancel(()=>{l()}).onDismiss(()=>{l()})}),successLogin:(e,o="person")=>{D.create({progress:!0,message:e,icon:o,color:"green",textColor:"white",timeout:900,position:"bottom-right"})},success:(e,o="check_circle")=>{D.create({progress:!0,message:e,icon:o,color:"light-green-7",textColor:"white",timeout:500,position:"center"})},rulewarning:(e,o="warning")=>{D.create({progress:!0,message:e,icon:o,color:"orange",textColor:"black",timeout:3e3,position:"bottom-left"})},warning:(e,o="warning")=>{D.create({progress:!0,message:e,icon:o,color:"red",textColor:"white",timeout:3e3,position:"bottom-left"})}},ue={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},P={xs:2,sm:4,md:8,lg:16,xl:24};var z=I({name:"QSeparator",props:{...A,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const o=L(),a=G(e,o.proxy.$q),i=c(()=>e.vertical===!0?"vertical":"horizontal"),l=c(()=>` q-separator--${i.value}`),d=c(()=>e.inset!==!1?`${l.value}-${ue[e.inset]}`:""),m=c(()=>`q-separator${l.value}${d.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(a.value===!0?" q-separator--dark":"")),f=c(()=>{const u={};if(e.size!==void 0&&(u[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const v=e.spaced===!0?`${P.md}px`:e.spaced in P?`${P[e.spaced]}px`:e.spaced,g=e.vertical===!0?["Left","Right"]:["Top","Bottom"];u[`margin${g[0]}`]=u[`margin${g[1]}`]=v}return u});return()=>s("hr",{class:m.value,style:f.value,"aria-orientation":i.value})}}),de=I({name:"DialogPluginComponent",props:{...A,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:e=>["ok","cancel","none"].includes(e)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(e,{emit:o}){const{proxy:a}=L(),{$q:i}=a,l=G(e,i),d=j(null),m=j(e.prompt!==void 0?e.prompt.model:e.options!==void 0?e.options.model:void 0),f=c(()=>"q-dialog-plugin"+(l.value===!0?" q-dialog-plugin--dark q-dark":"")+(e.progress!==!1?" q-dialog-plugin--progress":"")),u=c(()=>e.color||(l.value===!0?"amber":"primary")),v=c(()=>e.progress===!1?null:x(e.progress)===!0?{component:e.progress.spinner||T,props:{color:e.progress.color||u.value}}:{component:T,props:{color:u.value}}),g=c(()=>e.prompt!==void 0||e.options!==void 0),p=c(()=>{if(g.value!==!0)return{};const{model:r,isValid:Q,items:fe,...W}=e.prompt!==void 0?e.prompt:e.options;return W}),b=c(()=>x(e.ok)===!0||e.ok===!0?i.lang.label.ok:e.ok),y=c(()=>x(e.cancel)===!0||e.cancel===!0?i.lang.label.cancel:e.cancel),h=c(()=>e.prompt!==void 0?e.prompt.isValid!==void 0&&e.prompt.isValid(m.value)!==!0:e.options!==void 0?e.options.isValid!==void 0&&e.options.isValid(m.value)!==!0:!1),w=c(()=>({color:u.value,label:b.value,ripple:!1,disable:h.value,...x(e.ok)===!0?e.ok:{flat:!0},"data-autofocus":e.focus==="ok"&&g.value!==!0||void 0,onClick:n})),$=c(()=>({color:u.value,label:y.value,ripple:!1,...x(e.cancel)===!0?e.cancel:{flat:!0},"data-autofocus":e.focus==="cancel"&&g.value!==!0||void 0,onClick:k}));M(()=>e.prompt&&e.prompt.model,V),M(()=>e.options&&e.options.model,V);function C(){d.value.show()}function t(){d.value.hide()}function n(){o("ok",X(m.value)),t()}function k(){t()}function S(){o("hide")}function V(r){m.value=r}function K(r){h.value!==!0&&e.prompt.type!=="textarea"&&Y(r,13)===!0&&n()}function _(r,Q){return e.html===!0?s(O,{class:r,innerHTML:Q}):s(O,{class:r},()=>Q)}function R(){return[s(se,{color:u.value,dense:!0,autofocus:!0,dark:l.value,...p.value,modelValue:m.value,"onUpdate:modelValue":V,onKeyup:K})]}function U(){return[s(ce,{color:u.value,options:e.options.items,dark:l.value,...p.value,modelValue:m.value,"onUpdate:modelValue":V})]}function F(){const r=[];return e.cancel&&r.push(s(N,$.value)),e.ok&&r.push(s(N,w.value)),s(ie,{class:e.stackButtons===!0?"items-end":"",vertical:e.stackButtons,align:"right"},()=>r)}function E(){const r=[];return e.title&&r.push(_("q-dialog__title",e.title)),e.progress!==!1&&r.push(s(O,{class:"q-dialog__progress"},()=>s(v.value.component,v.value.props))),e.message&&r.push(_("q-dialog__message",e.message)),e.prompt!==void 0?r.push(s(O,{class:"scroll q-dialog-plugin__form"},R)):e.options!==void 0&&r.push(s(z,{dark:l.value}),s(O,{class:"scroll q-dialog-plugin__form"},U),s(z,{dark:l.value})),(e.ok||e.cancel)&&r.push(F()),r}function J(){return[s(re,{class:[f.value,e.cardClass],style:e.cardStyle,dark:l.value},E)]}return Object.assign(a,{show:C,hide:t}),()=>s(le,{ref:d,onHide:S},J)}});function H(e,o){for(const a in o)a!=="spinner"&&Object(o[a])===o[a]?(e[a]=Object(e[a])!==e[a]?{}:{...e[a]},H(e[a],o[a])):e[a]=o[a]}function me(e,o,a){return i=>{let l,d;const m=o===!0&&i.component!==void 0;if(m===!0){const{component:t,componentProps:n}=i;l=typeof t=="string"?a.component(t):t,d=n||{}}else{const{class:t,style:n,...k}=i;l=e,d=k,t!==void 0&&(k.cardClass=t),n!==void 0&&(k.cardStyle=n)}let f,u=!1;const v=j(null),g=Z(!1,"dialog"),p=t=>{if(v.value!==null&&v.value[t]!==void 0){v.value[t]();return}const n=f.$.subTree;if(n&&n.component){if(n.component.proxy&&n.component.proxy[t]){n.component.proxy[t]();return}if(n.component.subTree&&n.component.subTree.component&&n.component.subTree.component.proxy&&n.component.subTree.component.proxy[t]){n.component.subTree.component.proxy[t]();return}}console.error("[Quasar] Incorrectly defined Dialog component")},b=[],y=[],h={onOk(t){return b.push(t),h},onCancel(t){return y.push(t),h},onDismiss(t){return b.push(t),y.push(t),h},hide(){return p("hide"),h},update(t){if(f!==null){if(m===!0)Object.assign(d,t);else{const{class:n,style:k,...S}=t;n!==void 0&&(S.cardClass=n),k!==void 0&&(S.cardStyle=k),H(d,S)}f.$forceUpdate()}return h}},w=t=>{u=!0,b.forEach(n=>{n(t)})},$=()=>{C.unmount(g),oe(g),C=null,f=null,u!==!0&&y.forEach(t=>{t()})};let C=ee({name:"QGlobalDialog",setup:()=>()=>s(l,{...d,ref:v,onOk:w,onHide:$,onVnodeMounted(...t){typeof d.onVnodeMounted=="function"&&d.onVnodeMounted(...t),te(()=>p("show"))}})},a);return f=C.mount(g),h}}var ge={install({$q:e,parentApp:o}){e.dialog=this.create=me(de,!0,o)}},Oe=ne(({app:e})=>{B.setNoticeVue(ae),B.setDialogVue(ge),e.config.globalProperties.$alert=B,e.provide("alert",e.config.globalProperties.$alert)});export{Oe as default};
